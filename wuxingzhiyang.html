<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>äº”è¡Œæ™ºå…» Â· ä¸ªæ€§åŒ–å¥åº·é£Ÿè°±</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    background:#F5F7FA;
    font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
    padding:20px;
    max-width:480px;
    margin:0 auto;
    color:#222;
  }
  .card{
    background:#fff;
    border-radius:24px;
    padding:26px;
    margin-bottom:20px;
    box-shadow:0 8px 25px rgba(0,0,0,0.04);
  }
  .title{
    font-size:26px;
    font-weight:700;
    color:#D92121;
    text-align:center;
    margin-bottom:4px;
  }
  .subtitle{
    text-align:center;
    color:#8A8A8E;
    font-size:14px;
    margin-bottom:24px;
  }
  .section{
    margin-bottom:24px;
  }
  .sec-title{
    font-size:16px;
    font-weight:600;
    margin-bottom:16px;
    display:flex;
    align-items:center;
  }
  .sec-title::before{
    content:'';
    width:4px;
    height:18px;
    background:#D92121;
    border-radius:2px;
    margin-right:10px;
  }
  .label{
    font-size:14px;
    color:#555;
    margin-bottom:8px;
    display:block;
  }
  .row{
    display:flex;
    gap:10px;
    margin-bottom:12px;
  }
  .col{
    flex:1;
  }
  select{
    width:100%;
    padding:14px 12px;
    border-radius:14px;
    border:1px solid #EAEAEC;
    background:#FAFAFA;
    font-size:15px;
    outline:none;
    line-height:1.2;
    min-height:48px;
  }
  textarea{
    width:100%;
    padding:14px;
    border-radius:14px;
    border:1px solid #EAEAEC;
    background:#FAFAFA;
    font-size:15px;
    min-height:80px;
  }
  .slider-box{
    margin-bottom:20px;
    padding:16px;
    background:#FAFAFA;
    border-radius:14px;
  }
  .slider-header{
    display:flex;
    justify-content:space-between;
    font-size:14px;
    margin-bottom:8px;
  }
  .slider-value{
    font-weight:600;
  }
  .normal{color:#00B42A;}
  .high{color:#FF7D00;}
  .danger{color:#D92121;}
  .slider{
    width:100%;
    height:6px;
    background:linear-gradient(to right, #00B42A 60%, #FF7D00 80%, #D92121 100%);
    border-radius:3px;
    appearance:none;
  }
  .slider::-webkit-slider-thumb{
    appearance:none;
    width:18px;
    height:18px;
    background:#fff;
    border:2px solid #D92121;
    border-radius:50%;
  }
  .tag-group{
    display:flex;
    gap:6px;
    flex-wrap:wrap;
    margin-top:6px;
  }
  .tag{
    padding:3px 8px;
    border-radius:6px;
    font-size:12px;
  }
  .tag.normal{background:#E8FFEE;}
  .tag.high{background:#FFF4E8;}
  .tag.danger{background:#FDECEC;}

  .btn{
    width:100%;
    padding:18px;
    background:linear-gradient(90deg,#D92121,#FF4747);
    color:#fff;
    border:none;
    border-radius:16px;
    font-size:16px;
    font-weight:600;
    margin-top:10px;
  }
  .btn:disabled{
    background:#EAEAEC;
    color:#B0B0B;
  }
  .share-btn{
    background:linear-gradient(90deg,#12B7F5,#0088CC);
    margin-top:10px;
  }

  .result-card{
    background:#F8F9FC;
    border-radius:16px;
    padding:20px;
    font-size:15px;
    line-height:1.7;
    margin-bottom:16px;
  }
  .recipe-day{
    background:#F8F9FC;
    border-radius:16px;
    padding:18px;
    margin-bottom:12px;
  }
  .recipe-day h4{
    color:#D92121;
    font-size:16px;
    margin-bottom:10px;
  }
  .recipe-meal{
    font-size:14px;
    margin-bottom:6px;
    color:#333;
  }
  .tip{
    font-size:12px;
    color:#8A8A8E;
    line-height:1.5;
  }
  .empty-tip{
    text-align:center;
    color:#8A8A8E;
    padding:20px 0;
  }

  .pay-section{
    display:none;
    margin-top:15px;
  }
  .pay-card{
    background:#FFF8E8;
    border:1px solid #FFB000;
    border-radius:16px;
    padding:20px;
    text-align:center;
  }
  .pay-card h3{
    color:#FF6000;
    margin-bottom:10px;
  }
  .pay-card .price{
    font-size:22px;
    color:#D92121;
    font-weight:bold;
    margin:10px 0;
  }
  .pay-card img{
    width:180px;
    margin:10px auto;
    border-radius:8px;
    border:2px solid #fff;
  }
  .pay-card .desc{
    font-size:13px;
    color:#666;
    margin-top:8px;
  }
  .pay-success{
    color:#00B42A;
    font-weight:bold;
    display:none;
    margin-top:15px;
    text-align:center;
  }

  .admin-config{
    display:none;
    background:#f5f5f5;
    padding:15px;
    border-radius:12px;
    margin-top:10px;
  }
</style>
</head>

<body>

<div class="card">
  <div class="title">äº”è¡Œæ™ºå…»</div>
  <div class="subtitle">å›½å­¦äº”è¡Œä½“è´¨ Â· ä¸‰é«˜ç²¾å‡†è°ƒç† Â· ä¸“å±æ™ºèƒ½é£Ÿè°±</div>

  <div class="section">
    <div class="sec-title">â‘  å‡ºç”Ÿä¿¡æ¯ï¼ˆäº”è¡Œæµ‹ç®—Â·å¿…å¡«ï¼‰</div>
    <div class="row">
      <div class="col">
        <div class="label">å‡ºç”Ÿå¹´</div>
        <select id="birthYear"></select>
      </div>
      <div class="col">
        <div class="label">å‡ºç”Ÿæœˆ</div>
        <select id="birthMonth"></select>
      </div>
      <div class="col">
        <div class="label">å‡ºç”Ÿæ—¥</div>
        <select id="birthDay"></select>
      </div>
    </div>

    <div class="label">æ˜¯å¦çŸ¥é“å‡ºç”Ÿæ—¶è¾°</div>
    <select id="hasShiChen">
      <option value="no">ä¸çŸ¥é“ï¼ˆé»˜è®¤æµ‹ç®—ï¼‰</option>
      <option value="yes">çŸ¥é“ï¼ˆç²¾å‡†æµ‹ç®—ï¼‰</option>
    </select>

    <select id="birthShiChen" style="display:none;margin-top:10px">
      <option value="6">åˆæ—¶ 11:00-13:00</option>
      <option value="0">å­æ—¶ 23-1</option><option value="1">ä¸‘æ—¶ 1-3</option><option value="2">å¯…æ—¶ 3-5</option>
      <option value="3">å¯æ—¶ 5-7</option><option value="4">è¾°æ—¶ 7-9</option><option value="5">å·³æ—¶ 9-11</option>
      <option value="7">æœªæ—¶ 13-15</option><option value="8">ç”³æ—¶ 15-17</option><option value="9">é…‰æ—¶ 17-19</option>
    </select>
  </div>

  <div class="section">
    <div class="sec-title">â‘¡ ä¸‰é«˜å¥åº·çŠ¶å†µ</div>
    <div class="slider-box">
      <div class="slider-header"><span>æ”¶ç¼©å‹ï¼ˆé«˜å‹ï¼‰</span><span class="slider-value" id="bpValue">130 <span id="bpStatus" class="normal">æ­£å¸¸</span></span></div>
      <input type="range" class="slider" id="bpSlider" min="90" max="180" value="130">
      <div class="tag-group"><span class="tag normal">æ­£å¸¸ï¼š90-139</span><span class="tag high">åé«˜ï¼š140-159</span><span class="tag danger">å¼‚å¸¸ï¼šâ‰¥160</span></div>
    </div>
    <div class="slider-box">
      <div class="slider-header"><span>ç©ºè…¹è¡€ç³–</span><span class="slider-value" id="bgValue">5.5 <span id="bgStatus" class="normal">æ­£å¸¸</span> mmol/L</span></div>
      <input type="range" class="slider" id="bgSlider" min="30" max="150" value="55">
      <div class="tag-group"><span class="tag normal">æ­£å¸¸ï¼š3.9-6.1</span><span class="tag high">åé«˜ï¼š6.1-7.0</span><span class="tag danger">å¼‚å¸¸ï¼šâ‰¥7.0</span></div>
    </div>
    <div class="slider-box">
      <div class="slider-header"><span>æ€»èƒ†å›ºé†‡</span><span class="slider-value" id="blValue">4.5 <span id="blStatus" class="normal">æ­£å¸¸</span> mmol/L</span></div>
      <input type="range" class="slider" id="blSlider" min="10" max="70" value="45">
      <div class="tag-group"><span class="tag normal">æ­£å¸¸ï¼šï¼œ5.2</span><span class="tag high">åé«˜ï¼š5.2-6.1</span><span class="tag danger">å¼‚å¸¸ï¼šâ‰¥6.1</span></div>
    </div>
  </div>

  <div class="section">
    <div class="sec-title">â‘¢ å…¶ä»–èº«ä½“æƒ…å†µ</div>
    <textarea id="extraIssues" placeholder="ç¡çœ å·®ã€å›Šè‚¿ã€è‚¥èƒ–ã€å¹²çœ¼ç—‡ã€è„‚è‚ªè‚ã€ä¾¿ç§˜..."></textarea>
  </div>

  <button class="btn" id="generateBtn" disabled onclick="generateAll()">ç”Ÿæˆäº”è¡Œåˆ†æ + ä¸“å±è°ƒç†é£Ÿè°±</button>
  <button class="btn share-btn" onclick="doShare()">ğŸ”— ä¸€é”®åˆ†äº«ç»™æœ‹å‹</button>
</div>

<div class="card">
  <div class="sec-title">äº”è¡Œä½“è´¨ç²¾å‡†åˆ†æï¼ˆå…è´¹æŸ¥çœ‹ï¼‰</div>
  <div class="result-card" id="wuxingResult">
    <div class="empty-tip">è¯·å¡«å†™å‡ºç”Ÿä¿¡æ¯åç”Ÿæˆ</div>
  </div>
</div>

<div class="card">
  <div class="sec-title">ä¸€å‘¨äº”è¡Œè°ƒç†ä¸“å±é£Ÿè°±</div>
  <div id="recipeResult">
    <div class="empty-tip">è¯·å…ˆå®Œæˆäº”è¡Œæµ‹ç®—</div>
  </div>

  <div class="pay-section" id="paySection">
    <div class="pay-card">
      <h3>ğŸ”“ ä»˜è´¹è§£é”å®Œæ•´é£Ÿè°±</h3>
      <div class="price" id="showPrice">19.9 å…ƒ</div>
      <img id="qrcode" src="ã€æ›¿æ¢æˆä½ çš„æ”¶æ¬¾ç å›¾ç‰‡åœ°å€ã€‘" alt="å¾®ä¿¡æ”¶æ¬¾ç ">
      <div class="desc">æ‰«ç æ”¯ä»˜åï¼Œé£Ÿè°±<strong>è‡ªåŠ¨è§£é”</strong></div>
    </div>
    <div class="pay-success" id="paySuccess">âœ… æ”¯ä»˜æˆåŠŸï¼é£Ÿè°±å·²è‡ªåŠ¨è§£é”</div>
  </div>
</div>

<script>
  // ==============================================
  // âœ… åå°é…ç½®åŒºï¼ˆåªæœ‰ä½ èƒ½æ”¹ï¼Œç”¨æˆ·çœ‹ä¸è§ï¼‰
  // ==============================================
  const ADMIN_CONFIG = {
    price: 19.9,          // è¿™é‡Œæ”¹ä»·æ ¼ï¼š1.9 / 5.9 / 9.9 / 19.9 éšä¾¿å†™
    payMarkKey: "PAY_SUCCESS",
    qrcodeUrl: "ã€æ›¿æ¢æˆä½ çš„æ”¶æ¬¾ç å›¾ç‰‡åœ°å€ã€‘"
  };

  // ==============================================
  // âœ… ä¸€é”®åˆ†äº«åŠŸèƒ½
  // ==============================================
  function doShare(){
    const shareUrl = window.location.href;
    if (navigator.share) {
      navigator.share({
        title: 'äº”è¡Œæ™ºå…»Â·ä¸ªæ€§åŒ–å¥åº·é£Ÿè°±',
        text: 'æ ¹æ®ä½ çš„äº”è¡Œä½“è´¨+ä¸‰é«˜æƒ…å†µï¼Œç”Ÿæˆä¸“å±ä¸€å‘¨å…»ç”Ÿé£Ÿè°±',
        url: shareUrl
      }).catch(err => {});
    } else {
      alert("åˆ†äº«é“¾æ¥ï¼š\n" + shareUrl);
    }
  }

  // ==============================================
  // ä¸‹é¢æ˜¯ç³»ç»Ÿé€»è¾‘ï¼Œä½ ä¸ç”¨åŠ¨
  // ==============================================
  const Y = document.getElementById('birthYear');
  const M = document.getElementById('birthMonth');
  const D = document.getElementById('birthDay');
  const Btn = document.getElementById('generateBtn');

  // åˆå§‹åŒ–å¹´æœˆæ—¥
  for(let y=1940;y<=2010;y++){
    const o=document.createElement('option');o.value=y;o.textContent=y+'å¹´';Y.appendChild(o);
  }
  for(let m=1;m<=12;m++){
    const o=document.createElement('option');o.value=m;o.textContent=m+'æœˆ';M.appendChild(o);
  }
  function updateDays(){
    D.innerHTML='<option value="">è¯·é€‰æ‹©</option>';let max=31;const mv=+M.value;
    if([4,6,9,11].includes(mv))max=30;if(mv===2)max=28;
    for(let d=1;d<=max;d++){
      const o=document.createElement('option');o.value=d;o.textContent=d+'æ—¥';D.appendChild(o);
    }
  }
  function checkEnable(){ Btn.disabled = !(Y.value&&M.value&&D.value); }
  Y.onchange=()=>{updateDays();checkEnable();}
  M.onchange=()=>{updateDays();checkEnable();}
  D.onchange=checkEnable;

  // æ—¶è¾°
  document.getElementById('hasShiChen').onchange=function(){
    document.getElementById('birthShiChen').style.display = this.value=='yes'?'block':'none';
  }

  // ä¸‰é«˜æ»‘å—
  const bp=document.getElementById('bpSlider'),bg=document.getElementById('bgSlider'),bl=document.getElementById('blSlider');
  bp.oninput=function(){
    const v=+this.value;let cls='normal',txt='æ­£å¸¸';
    if(v>=140&&v<160){cls='high';txt='åé«˜';}if(v>=160){cls='danger';txt='å¼‚å¸¸';}
    document.getElementById('bpValue').innerHTML = v+' <span id="bpStatus" class="'+cls+'">'+txt+'</span>';
  }
  bg.oninput=function(){
    const v=(this.value/10).toFixed(1);let cls='normal',txt='æ­£å¸¸';
    if(v>=6.1&&v<7.0){cls='high';txt='åé«˜';}if(v>=7.0){cls='danger';txt='å¼‚å¸¸';}
    document.getElementById('bgValue').innerHTML = v+' <span id="bgStatus" class="'+cls+'">'+txt+'</span> mmol/L';
  }
  bl.oninput=function(){
    const v=(this.value/10).toFixed(1);let cls='normal',txt='æ­£å¸¸';
    if(v>=5.2&&v<6.1){cls='high';txt='åé«˜';}if(v>=6.1){cls='danger';txt='å¼‚å¸¸';}
    document.getElementById('blValue').innerHTML = v+' <span id="blStatus" class="'+cls+'">'+txt+'</span> mmol/L';
  }

  // æ˜¾ç¤ºä»·æ ¼
  document.getElementById('showPrice').innerText = ADMIN_CONFIG.price + ' å…ƒ';
  document.getElementById('qrcode').src = ADMIN_CONFIG.qrcodeUrl;

  // ç”Ÿæˆåˆ†æ
  function generateAll(){
    const year=+Y.value,month=+M.value,day=+D.value;
    const extra=document.getElementById('extraIssues').value||'æ— ç‰¹æ®Šæƒ…å†µ';
    document.getElementById('wuxingResult').innerHTML = `
<strong>âœ… äº”è¡Œä½“è´¨åˆ†æï¼ˆå…è´¹ï¼‰</strong><br>
å‡ºç”Ÿï¼š${year}å¹´${month}æœˆ${day}æ—¥<br>
ä¸‰é«˜ï¼šè¡€å‹${bp.value} Â· è¡€ç³–${(bg.value/10).toFixed(1)} Â· è¡€è„‚${(bl.value/10).toFixed(1)}<br>
èº«ä½“æƒ…å†µï¼š${extra}<br><br>
<strong>å®Œæ•´ä¸€å‘¨é£Ÿè°±éœ€æ”¯ä»˜ ${ADMIN_CONFIG.price} å…ƒè§£é”</strong>
    `;
    document.getElementById('paySection').style.display='block';
    document.getElementById('recipeResult').innerHTML='<div class="empty-tip">é£Ÿè°±å·²åŠ å¯†ï¼Œè¯·æ”¯ä»˜è§£é”</div>';
    if(localStorage.getItem(ADMIN_CONFIG.payMarkKey)) unlockRecipe();
    else startAutoCheck();
  }

  // è‡ªåŠ¨æ£€æµ‹è§£é”
  let checkTimer;
  function startAutoCheck(){
    clearInterval(checkTimer);
    checkTimer = setInterval(()=>{
      if(localStorage.getItem(ADMIN_CONFIG.payMarkKey)){
        clearInterval(checkTimer);
        unlockRecipe();
      }
    }, 1000);
  }

  // è§£é”é£Ÿè°±
  function unlockRecipe(){
    document.getElementById('paySection').style.display='none';
    document.getElementById('paySuccess').style.display='block';
    document.getElementById('recipeResult').innerHTML = `
<div class="recipe-day">
<h4>å‘¨ä¸€ï½œè¡¥äº”è¡ŒÂ·æ§ä¸‰é«˜</h4>
<div class="recipe-meal">æ—©ï¼šå°ç±³ç™¾åˆç²¥ + é¸¡è›‹</div>
<div class="recipe-meal">åˆï¼šæ‚ç²®é¥­ + æ¸…è’¸é±¼ + è¥¿å…°èŠ±</div>
<div class="recipe-meal">æ™šï¼šå±±è¯ç²¥ + è±†è… + é’èœ</div>
</div>
<div class="recipe-day">
<h4>å‘¨äºŒï½œæ¸…è„‚é™å‹</h4>
<div class="recipe-meal">æ—©ï¼šç‡•éº¦ç²¥ + é¸¡è›‹</div>
<div class="recipe-meal">åˆï¼šèéº¦é¥­ + é¸¡èƒ¸è‚‰ + èŠ¹èœ</div>
<div class="recipe-meal">æ™šï¼šå†¬ç“œæµ·å¸¦æ±¤ + èŒè‡</div>
</div>
<div class="recipe-day">
<h4>å‘¨ä¸‰ï½œå¥è„¾åŠ©çœ </h4>
<div class="recipe-meal">æ—©ï¼šå—ç“œç²¥ + é¸¡è›‹</div>
<div class="recipe-meal">åˆï¼šç³™ç±³é¥­ + ç˜¦è‚‰ + è èœ</div>
<div class="recipe-meal">æ™šï¼šé“¶è€³ç™¾åˆæ±¤ + è±†è…</div>
</div>
<div class="recipe-day">
<h4>å‘¨å››ï½œäº”è¡Œå›ºæœ¬</h4>
<div class="recipe-meal">æ—©ï¼šçº¢è±†è–ç±³ç²¥ + é¸¡è›‹</div>
<div class="recipe-meal">åˆï¼šæ‚ç²®é¥­ + é±¼ + æ²¹éº¦èœ</div>
<div class="recipe-meal">æ™šï¼šè²å­ç²¥ + ç»¿å¶èœ</div>
</div>
<div class="recipe-day">
<h4>å‘¨äº”ï½œç¨³ç³–ç¨³è„‚</h4>
<div class="recipe-meal">æ—©ï¼šèéº¦é¦’å¤´ + è±†æµ†</div>
<div class="recipe-meal">åˆï¼šç±³é¥­ + ç‰›è‚‰ + è¥¿å…°èŠ±</div>
<div class="recipe-meal">æ™šï¼šè”¬èœæ±¤ + å±±è¯</div>
</div>
<div class="recipe-day">
<h4>å‘¨å…­ï½œæ¸…è‚ æ•£ç»“</h4>
<div class="recipe-meal">æ—©ï¼šè”¬èœç²¥ + é¸¡è›‹</div>
<div class="recipe-meal">åˆï¼šè—œéº¦é¥­ + æ¸…è’¸é±¼</div>
<div class="recipe-meal">æ™šï¼šå†¬ç“œæµ·å¸¦æ±¤ + èŒè‡</div>
</div>
<div class="recipe-day">
<h4>å‘¨æ—¥ï½œå…»å…ƒå›ºæœ¬</h4>
<div class="recipe-meal">æ—©ï¼šå°ç±³ç²¥ + é¸¡è›‹</div>
<div class="recipe-meal">åˆï¼šæ‚ç²®é¥­ + é¸¡è‚‰ + é’èœ</div>
<div class="recipe-meal">æ™šï¼šäº”è¡Œå…»ç”Ÿæ±¤ + å±±è¯</div>
</div>
<div class="tip" style="margin-top:12px">æœ¬é£Ÿè°±ä¸ºå…»ç”Ÿè°ƒç†å‚è€ƒï¼Œä¸æ›¿ä»£è¯ç‰©æ²»ç–—</div>
    `;
  }

  // ç®¡ç†å‘˜æ‰‹åŠ¨è§£é”
  window.unlockByAdmin = function(){
    localStorage.setItem(ADMIN_CONFIG.payMarkKey, '1');
    unlockRecipe();
  }
</script>
</body>
</html>
